(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{17:function(e,t,c){},18:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c(2),a=c.n(n),i=c(10),s=c.n(i),o=c(6),u=c(3),d=c(8);function l(e){var t=e.nextScreen,c=e.changeDifficulty;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Battleship"}),Object(r.jsx)("h2",{children:"Select CPU difficulty"}),Object(r.jsxs)("div",{className:"difficulty-wrapper",children:[Object(r.jsxs)("div",{onClick:function(){c(0),t()},className:"difficulty-item",children:[Object(r.jsx)(d.c,{}),"Mild"]}),Object(r.jsxs)("div",{onClick:function(){c(1),t()},className:"difficulty-item",children:[Object(r.jsx)(d.b,{}),"Spicy"]}),Object(r.jsxs)("div",{onClick:function(){c(2),t()},className:"difficulty-item",children:[Object(r.jsx)(d.a,{}),"Devilish"]})]})]})}var j=c(4),f=function(e,t,c,r){var n=[],a=0===r?t:b(t,e);if(!(e-a%e>=c))return null;for(var i=a;i<a+c;i++)0===r?n.push(i):n.push(b(i,e));return n};function b(e,t){return e%t*t+1*(e/t|0)}function h(e,t){var c=[],r=[],n=[],a=[],i=function(t,r,n){c.push({isSunk:!1,pieceLength:r,coords:f(e,t,r,n)}),s()},s=function(){r=c.map((function(e){return e.coords})).flat()},o=function(){[5,4,3,2,2].forEach((function(t){for(var c=Math.floor(99*Math.random()),n=Math.round(Math.random()),a=f(e,c,t,n);null===a||a.some((function(e){return r.includes(e)}));)c=Math.floor(99*Math.random()),n=Math.round(Math.random()),a=f(e,c,t,n);i(c,t,n)}))};t&&o();return{getBoatsCoords:function(){return r},getHitsCoords:function(){return n},getMissesCoords:function(){return a},placeShip:i,receiveAttack:function(e){r.includes(e)?n.push(e):a.push(e),c.forEach((function(e){e.coords.every((function(e){return n.includes(e)}))&&(e.isSunk=!0)}))},checkGameOver:function(){return r.length>0&&c.every((function(e){return e.isSunk}))},placeComputerShips:o}}function O(e){var t=e.isPlayerBoard,c=e.isHit,n=e.isBoat,a=e.isMiss,i=e.index,s=e.handleClick;return t?Object(r.jsx)("div",{className:c?"hit":n?"boat":a?"miss":"cell"}):Object(r.jsx)("div",{onClick:function(){return s(i)},className:c?"hit":a?"miss":"cell"})}function m(e){var t=e.playerBoard,c=e.placeShip,a=e.nextScreen,i=10,s=[5,4,3,2,2],o=Object(n.useState)(0),d=Object(u.a)(o,2),l=d[0],h=d[1],O=Object(n.useState)([]),m=Object(u.a)(O,2),v=m[0],p=m[1],x=Object(n.useState)(0),y=Object(u.a)(x,2),g=y[0],C=y[1],M=Object(n.useState)(s[l]),S=Object(u.a)(M,2),k=S[0],B=S[1];return Object(r.jsxs)("div",{className:"placing-wrapper",children:[Object(r.jsx)("button",{className:"btn btn-secondary",onClick:function(){C(0===g?1:0)},children:"Shift axis"}),Object(r.jsx)("div",{className:"gameboard-grid",children:Object(j.a)(new Array(100)).map((function(e,n){var a=[t.getBoatsCoords(),t.getHitsCoords(),t.getMissesCoords()],o=a[0];return Object(r.jsx)("div",{index:n,onMouseEnter:function(){return function(e){var t=0===g?e:b(e,i);if(i-t%i>=k){for(var c=[],r=t;r<t+k;r++)0===g?c.push(r):c.push(b(r,i));p(c)}else p([])}(n)},onClick:function(){return function(e){var r=f(i,e,k,g),n=t.getBoatsCoords();if(r&&r.every((function(e){return!n.includes(e)}))){var a=l;h(a+1),B(s[a+1]),c(e,k,g)}}(n)},className:o.includes(n)?"boat":v.includes(n)?"hovered":"cell"},n)}))}),l>=s.length?Object(r.jsx)("button",{className:"btn btn-primary",onClick:a,children:"Start game"}):null]})}function v(e){var t=e.playerBoard,c=e.isPlayerBoard,a=e.isPlayerTurn,i=e.changeTurn,s=e.computerDifficulty,d=e.isGameover,l=e.makeGameOver,f=Object(n.useState)(h(10,!c)),b=Object(u.a)(f,2),m=b[0],v=b[1];Object(n.useEffect)((function(){if(c){var e=Object(o.a)({},t);v(e)}}),[]);var p=function(e){var t=Object(o.a)({},m);t.receiveAttack(e),v(t),m.checkGameOver()&&l(a)},x=function(){var e=[m.getBoatsCoords(),m.getHitsCoords(),m.getMissesCoords()],t=e[1],c=e[2];p(function(e,t,c){var r=2===e?20:1===e?10:5;return Math.round(100*Math.random())<r?function(){for(var e=Math.floor(Math.random()*t.length),r=0;c.includes(t[e])&&r<100;)e=Math.floor(Math.random()*t.length),r++;return t[e]}():function(){for(var e=Math.floor(100*Math.random()),t=0;c.includes(e)&&t<100;)e=Math.floor(100*Math.random()),t++;return e}()}(s,e[0],[].concat(Object(j.a)(t),Object(j.a)(c)))),i()},y=function(e){var t=[m.getBoatsCoords(),m.getHitsCoords(),m.getMissesCoords()],c=t[1],r=t[2],n=[].concat(Object(j.a)(c),Object(j.a)(r));!a||n.includes(e)||d||(p(e),i())};return Object(n.useEffect)((function(){a||!c||d||x()}),[a]),Object(r.jsx)("div",{className:"gameboard-grid",children:Object(j.a)(new Array(100)).map((function(e,t){var n=[m.getBoatsCoords(),m.getHitsCoords(),m.getMissesCoords()],a=n[0],i=n[1],s=n[2];return Object(r.jsx)(O,{index:t,isPlayerBoard:c,isHit:i.includes(t),isBoat:a.includes(t),isMiss:s.includes(t),handleClick:y},t)}))})}function p(e){var t=e.playerBoard,c=e.computerDifficulty,a=Object(n.useState)(!0),i=Object(u.a)(a,2),s=i[0],o=i[1],d=Object(n.useState)(!1),l=Object(u.a)(d,2),j=l[0],f=l[1],b=Object(n.useState)(),h=Object(u.a)(b,2),O=h[0],m=h[1],p=function(){o(!s)},x=function(e){f(!0),m(e?"Player":"CPU")};return Object(n.useEffect)((function(){}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"gameboard-header",children:Object(r.jsx)("h1",{children:j?"".concat(O," wins!"):s?"Make your turn":"CPU turn"})}),Object(r.jsxs)("div",{className:"gameboard-wrapper",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Player board"}),Object(r.jsx)(v,{isPlayerBoard:!0,isPlayerTurn:s,playerBoard:t,changeTurn:p,computerDifficulty:c,isGameover:j,makeGameOver:x})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Computer board"}),Object(r.jsx)(v,{isPlayerBoard:!1,isPlayerTurn:s,changeTurn:p,computerDifficulty:c,isGameover:j,makeGameOver:x})]})]})]})}function x(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(0),s=Object(u.a)(i,2),d=s[0],j=s[1],f=Object(n.useState)(h(10,!1)),b=Object(u.a)(f,2),O=b[0],v=b[1],x=function(){var e=c;++e>2&&(e=0),a(e)};return Object(r.jsx)("div",{id:"content",children:0===c?Object(r.jsx)(l,{nextScreen:x,changeDifficulty:function(e){j(e)}}):1===c?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"gameboard-header",children:Object(r.jsx)("h1",{children:"Place your float"})}),Object(r.jsx)("div",{className:"gameboard-wrapper",children:Object(r.jsx)(m,{playerBoard:O,placeShip:function(e,t,c){var r=Object(o.a)({},O);r.placeShip(e,t,c),v(r)},nextScreen:x})})]}):Object(r.jsx)(p,{playerBoard:O,computerDifficulty:d})})}var y=c(11);function g(){return Object(r.jsxs)("p",{children:["Made by"," ",Object(r.jsxs)("a",{href:"https://github.com/FernanEd",target:"_blank",rel:"noreferrer",children:[Object(r.jsx)(y.a,{}),"FernanEd"]}),". 2020."]})}c(17);s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),s.a.render(Object(r.jsx)(g,{}),document.getElementById("credits"))}},[[18,1,2]]]);
//# sourceMappingURL=main.064d49cb.chunk.js.map