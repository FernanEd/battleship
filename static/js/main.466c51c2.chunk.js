(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{18:function(e,t,c){},19:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(2),a=c.n(r),i=c(11),s=c.n(i),o=c(8),u=c(3),l=c(4);function d(e){var t=e.nextScreen,c=e.changeDifficulty;return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{id:"main-title",children:"Battleship"}),Object(n.jsx)("h2",{children:"Select CPU difficulty"}),Object(n.jsxs)("div",{className:"difficulty-wrapper",children:[Object(n.jsxs)("div",{onClick:function(){c(0),t()},className:"difficulty-item",children:[Object(n.jsx)(l.c,{}),"Mild"]}),Object(n.jsxs)("div",{onClick:function(){c(1),t()},className:"difficulty-item",children:[Object(n.jsx)(l.b,{}),"Spicy"]}),Object(n.jsxs)("div",{onClick:function(){c(2),t()},className:"difficulty-item",children:[Object(n.jsx)(l.a,{}),"Devilish"]})]})]})}var j=c(5),f=function(e,t,c,n){var r=[],a=0===n?t:b(t,e);if(!(e-a%e>=c))return null;for(var i=a;i<a+c;i++)0===n?r.push(i):r.push(b(i,e));return r};function b(e,t){return e%t*t+1*(e/t|0)}function h(e,t){var c=[],n=[],r=[],a=[],i=function(t,n,r){c.push({isSunk:!1,pieceLength:n,coords:f(e,t,n,r)}),s()},s=function(){n=c.map((function(e){return e.coords})).flat()},o=function(){[5,4,3,2,2].forEach((function(t){for(var c=Math.floor(99*Math.random()),r=Math.round(Math.random()),a=f(e,c,t,r);null===a||a.some((function(e){return n.includes(e)}));)c=Math.floor(99*Math.random()),r=Math.round(Math.random()),a=f(e,c,t,r);i(c,t,r)}))};t&&o();return{getBoatsCoords:function(){return n},getHitsCoords:function(){return r},getMissesCoords:function(){return a},placeShip:i,receiveAttack:function(e){n.includes(e)?r.push(e):a.push(e),c.forEach((function(e){e.coords.every((function(e){return r.includes(e)}))&&(e.isSunk=!0)}))},checkGameOver:function(){return n.length>0&&c.every((function(e){return e.isSunk}))},placeComputerShips:o}}var O=c(6);function m(e){var t=e.playerBoard,c=e.placeShip,a=e.nextScreen,i=10,s=[5,4,3,2,2],o=Object(r.useState)(0),l=Object(u.a)(o,2),d=l[0],h=l[1],m=Object(r.useState)([]),v=Object(u.a)(m,2),p=v[0],x=v[1],g=Object(r.useState)(0),y=Object(u.a)(g,2),C=y[0],M=y[1],S=Object(r.useState)(s[d]),k=Object(u.a)(S,2),B=k[0],N=k[1],P=function(e){Object(O.a)({targets:e,opacity:[0,1],scale:[1.6,1],duration:700})};return Object(n.jsxs)("div",{className:"placing-wrapper",children:[Object(n.jsx)("button",{className:"btn btn-secondary",onClick:function(){M(0===C?1:0)},children:"Shift axis"}),Object(n.jsx)("div",{className:"gameboard-grid",children:Object(j.a)(new Array(100)).map((function(e,r){var a=[t.getBoatsCoords(),t.getHitsCoords(),t.getMissesCoords()],o=a[0];return Object(n.jsx)("div",{id:"cell-".concat(r),index:r,onMouseEnter:function(){return function(e){var t=0===C?e:b(e,i);if(i-t%i>=B){for(var c=[],n=t;n<t+B;n++)0===C?c.push(n):c.push(b(n,i));x(c)}else x([])}(r)},onClick:function(){return function(e){var n=t.getBoatsCoords(),r=f(i,e,B,C);if(r&&r.every((function(e){return!n.includes(e)}))){P(r.map((function(e){return"#cell-".concat(e)})));var a=d;h(a+1),N(s[a+1]),c(e,B,C)}}(r)},className:o.includes(r)?"boat":p.includes(r)?"hovered":"cell"},r)}))}),d>=s.length?Object(n.jsx)("button",{className:"btn btn-primary",onClick:a,children:"Start game"}):null]})}function v(e){var t=e.isPlayerBoard,c=e.isHit,r=e.isBoat,a=e.isMiss,i=e.index,s=e.handleClick;return t?Object(n.jsx)("div",{id:"player-cell-".concat(i),className:c?"hit":r?"boat":a?"miss":"cell"}):Object(n.jsx)("div",{id:"computer-cell-".concat(i),onClick:function(){return s(i)},className:c?"hit":a?"miss":"cell"})}function p(e){var t=e.playerBoard,c=e.isPlayerBoard,a=e.isPlayerTurn,i=e.changeTurn,s=e.computerDifficulty,l=e.isGameover,d=e.makeGameOver,f=Object(r.useState)(h(10,!c)),b=Object(u.a)(f,2),m=b[0],p=b[1];Object(r.useEffect)((function(){if(c){var e=Object(o.a)({},t);p(e)}}),[]);var x=function(e){g(c?"#player-cell-".concat(e):"#computer-cell-".concat(e));var t=Object(o.a)({},m);t.receiveAttack(e),p(t),m.checkGameOver()&&d(a)},g=function(e){Object(O.a)({targets:e,opacity:[0,1],scale:[1.6,1],duration:700})},y=function(){var e=[m.getBoatsCoords(),m.getHitsCoords(),m.getMissesCoords()],t=e[1],c=e[2];x(function(e,t,c){var n=2===e?20:1===e?10:5;return Math.round(100*Math.random())<n?function(){for(var e=Math.floor(Math.random()*t.length),n=0;c.includes(t[e])&&n<100;)e=Math.floor(Math.random()*t.length),n++;return t[e]}():function(){for(var e=Math.floor(100*Math.random()),t=0;c.includes(e)&&t<100;)e=Math.floor(100*Math.random()),t++;return e}()}(s,e[0],[].concat(Object(j.a)(t),Object(j.a)(c)))),i()},C=function(e){var t=[m.getBoatsCoords(),m.getHitsCoords(),m.getMissesCoords()],c=t[1],n=t[2],r=[].concat(Object(j.a)(c),Object(j.a)(n));!a||r.includes(e)||l||(x(e),i())};return Object(r.useEffect)((function(){a||!c||l||setTimeout(y,500)}),[a]),Object(n.jsx)("div",{className:"gameboard-grid",children:Object(j.a)(new Array(100)).map((function(e,t){var r=[m.getBoatsCoords(),m.getHitsCoords(),m.getMissesCoords()],a=r[0],i=r[1],s=r[2];return Object(n.jsx)(v,{index:t,isPlayerBoard:c,isHit:i.includes(t),isBoat:a.includes(t),isMiss:s.includes(t),handleClick:C},t)}))})}function x(e){var t=e.playerBoard,c=e.computerDifficulty,a=Object(r.useState)(!0),i=Object(u.a)(a,2),s=i[0],o=i[1],d=Object(r.useState)(!1),j=Object(u.a)(d,2),f=j[0],b=j[1],h=Object(r.useState)(),O=Object(u.a)(h,2),m=O[0],v=O[1],x=function(){o(!s)},g=function(e){b(!0),v(e?"Player":"CPU")};return Object(r.useEffect)((function(){}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"gameboard-header",children:Object(n.jsx)("h1",{children:f?"".concat(m," wins!"):s?"Make your turn":"CPU turn"})}),Object(n.jsxs)("div",{className:"gameboard-wrapper",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("h1",{className:"gameboard-title",children:["Player ",Object(n.jsx)(l.d,{})]}),Object(n.jsx)(p,{isPlayerBoard:!0,isPlayerTurn:s,playerBoard:t,changeTurn:x,computerDifficulty:c,isGameover:f,makeGameOver:g})]}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h1",{class:"gameboard-title",children:["Computer"," ",2===c?Object(n.jsx)(l.a,{}):1===c?Object(n.jsx)(l.b,{}):Object(n.jsx)(l.c,{})]}),Object(n.jsx)(p,{isPlayerBoard:!1,isPlayerTurn:s,changeTurn:x,computerDifficulty:c,isGameover:f,makeGameOver:g})]})]})]})}function g(){var e=Object(r.useState)(0),t=Object(u.a)(e,2),c=t[0],a=t[1],i=Object(r.useState)(0),s=Object(u.a)(i,2),l=s[0],j=s[1],f=Object(r.useState)(h(10,!1)),b=Object(u.a)(f,2),v=b[0],p=b[1],g=function(){var e=c;++e>2&&(e=0),y(),a(e)};Object(r.useEffect)((function(){y()}),[]);var y=function(){Object(O.a)({targets:"#content",translateY:[0,10],opacity:[0,1],duration:300,easing:"linear"})};return Object(n.jsx)("div",{id:"content",children:0===c?Object(n.jsx)(d,{nextScreen:g,changeDifficulty:function(e){j(e)}}):1===c?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"gameboard-header",children:Object(n.jsx)("h1",{children:"Place your float"})}),Object(n.jsx)("div",{className:"gameboard-wrapper",children:Object(n.jsx)(m,{playerBoard:v,placeShip:function(e,t,c){var n=Object(o.a)({},v);n.placeShip(e,t,c),p(n)},nextScreen:g})})]}):Object(n.jsx)(x,{playerBoard:v,computerDifficulty:l})})}var y=c(12);function C(){return Object(n.jsxs)("p",{children:["Made by"," ",Object(n.jsxs)("a",{href:"https://github.com/FernanEd",target:"_blank",rel:"noreferrer",children:[Object(n.jsx)(y.a,{}),"FernanEd"]}),". 2020."]})}c(18);s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root")),s.a.render(Object(n.jsx)(C,{}),document.getElementById("credits"))}},[[19,1,2]]]);
//# sourceMappingURL=main.466c51c2.chunk.js.map